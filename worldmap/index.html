<!DOCTYPE html>
<html>
<head>
    <title>Yrdanea Vergangenheit</title>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css'>
    <link rel='stylesheet' href='https://cdn.rawgit.com/ardhi/Leaflet.MousePosition/master/src/L.Control.MousePosition.css'>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-sidebar-v2@3.2.3/css/leaflet-sidebar.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src='https://unpkg.com/leaflet@1.3.1/dist/leaflet.js'></script>
    <script src='https://cdn.rawgit.com/ardhi/Leaflet.MousePosition/master/src/L.Control.MousePosition.js'></script>
    <script src='https://unpkg.com/leaflet-sidebar-v2@3.2.3/js/leaflet-sidebar.min.js'></script>

    <style type="text/css">
        html, body, #map { width:100vw; height:100%; margin:0; padding:0; z-index: 1; background: #101010; }
        #fit { position: absolute; top: 10px; right: 10px; z-index: 5; }
        .leaflet-sidebar { border: none !important; box-shadow: none !important; }
        .leaflet-sidebar-content { background-color: rgba(30, 30, 30, 0.95) !important; color: #e0e0e0 !important; }
        .leaflet-sidebar-tabs { background-color: #222 !important; }
        .leaflet-sidebar-header { background-color: #444 !important; }
        .leaflet-sidebar-tabs > ul > li > a { color: #ffffff !important; }
		.leaflet-marker-icon {
    display: block !important;
}

/* Verhindert, dass SVGs auf 0px kollabieren */
img[src$=".svg"] {
    width: 120px !important;
    height: 120px !important;
}
	</style>
</head>
<body>
    <div id='map'></div>
    <button id='fit' onClick='resetView()'>Reset View</button>

    <div id="sidebar" class="leaflet-sidebar collapsed">
        <div class="leaflet-sidebar-tabs">
            <ul role="tablist">
                <li><a href="#home" role="tab"><i class="fa fa-bars"></i></a></li>
            </ul>
        </div>
        <div class="leaflet-sidebar-content">
            <div class="leaflet-sidebar-pane" id="home">
                <h1 class="leaflet-sidebar-header">
                    Informationen
                    <span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
                <div id="sidebar-content-area" style="padding: 15px;">
                    WÃ¤hle einen Ort aus...
                </div>
            </div>
        </div>
    </div>

    <script type='text/javascript'>
        var mapMinZoom = 1;
        var mapMaxZoom = 5;
        var northWest = new L.LatLng(+90, -180),
            southEast = new L.LatLng(-90, +180),
            bounds = new L.LatLngBounds(northWest, southEast);

        var map = L.map('map');
        
        L.tileLayer('tiles/{z}/{x}/{y}.jpg', {
            minZoom: mapMinZoom,
            maxZoom: mapMaxZoom,
            attribution: 'Yrdanea',
            noWrap: true,
            tms: false
        }).addTo(map);
        
        // Icon Definition ohne Schatten-Fehler
        var testIcon = L.icon({
            iconUrl: 'img/logo.svg',
            iconSize: [120, 120],
            iconAnchor: [60, 60],
            className: 'map-logo-icon', // Eigene Klasse verhindert Standard-Rahmen
            shadowUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='
        });

        var mapCenterPopup = "<b>Map Center</b> This is the center of the map.";

        // Sidebar Initialisierung (Jetzt findet er das Element 'sidebar'!)
        var sidebar = L.control.sidebar({ container: 'sidebar', position: 'left' }).addTo(map);

        // Marker
        var mapCenterMarker = L.marker([0.0, 0.0], {icon:testIcon}).addTo(map);

        mapCenterMarker.on('click', function() {
            document.getElementById('sidebar-content-area').innerHTML = '<h1> MapCenter </h1>' + mapCenterPopup;
            sidebar.open('home'); 
        });

        function resetView() { map.fitBounds(bounds); }
        resetView();
        L.control.mousePosition().addTo(map);
    </script>
</body>
</html>